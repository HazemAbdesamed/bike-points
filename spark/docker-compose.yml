version: '3.8'

services:

  spark:
      image: bitnami/spark:3.5.0
      container_name: spark
      hostname: spark
      ports:
        - $SPARK_HOST_UI_PORT:$SPARK_UI_PORT
      env_file:
        - ./.env
        - ../kafka/.env
        - ../cassandra/.env
      volumes:
        - ./data-processing:/opt/bitnami/spark/data-processing
        - ./config/entrypoint.sh:/opt/bitnami/scripts/spark/entrypoint.sh
        - ./requirements.txt:/opt/bitnami/spark/requirements.txt
        - spark-data:$SPARK_VOLUME_PATH
      networks:
        - spark_data-network